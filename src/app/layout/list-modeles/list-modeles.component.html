<div class="container pt-5">
    <app-page-header [heading]="'Liste des Modeles'" [icon]="'fas fa-car'"></app-page-header>
    <div class="row">
        <div class="col col-xl-12 col-lg-12">
            <div class="card mb-3">
                <div class="card-header">
                    Liste des Modeles
                    <div style="float : right">
                      <button mat-icon-button color="primary" (click) = "onCreateModele()">
                        <mat-icon>add</mat-icon>
                      </button>
                    </div>
                </div>
                <mat-accordion>
                  <mat-expansion-panel *ngFor= "let modele of listModeles, let j = index">
                    <mat-expansion-panel-header>
                      <mat-panel-title>
                        <img [src]="modele.photo" class="icon-logo" alt="">
                        <span style = "margin-left : 10px; margin-top : 10px; font-weight : bold">{{modele.name}}</span>
                      </mat-panel-title>
                      <mat-panel-description>
                         <span style = "margin-left : 10px; margin-top : 10px;">{{modele.versions.length}} options et {{modele.couleurs.length}} couleurs</span>
                      </mat-panel-description>
                    </mat-expansion-panel-header>

                    <div class="row">
                      <div class="col-sm-6">
                        <span style="color : rgba(0,0,0,.54); margin : 20px">Versions</span>
                        <div style="float : right">
                          <button mat-icon-button color="primary" (click) = "onCreateVersion(j)" >
                            <mat-icon>add</mat-icon>
                          </button>
                        </div>
                        <div style="clear:both;">
                        </div>

                        <mat-expansion-panel *ngFor= "let version of modele.versions, let h = index">
                          <mat-expansion-panel-header>
                            <mat-panel-title>
                              {{version.name}}
                            </mat-panel-title>
                            <mat-panel-description>
                               {{version.options.length}} options
                            </mat-panel-description>
                          </mat-expansion-panel-header>
                          <div style="float : right">
                            <button mat-icon-button color="primary" (click) = "onCreateOption(h,j)">
                              <mat-icon>add</mat-icon>
                            </button>
                          </div>
                          <mat-list>
                            <h3 mat-subheader>Options</h3>
                            <mat-list-item *ngFor="let option of version.options, let i =index">
                              <mat-icon mat-list-icon style="color : #228B22">check_circle</mat-icon>
                              <h4 mat-line>{{option.name}}</h4>
                              <p mat-line> {{option.value}} </p>
                                <button mat-icon-button color="primary" (click) = "onUpdateOption(i,j,h)">
                                  <mat-icon>create</mat-icon>
                                </button>
                                <button mat-icon-button color="warn" (click) = "onDeleteOption(i,j,h)">
                                  <mat-icon>delete</mat-icon>
                                </button>
                            </mat-list-item>
                          </mat-list>
                        </mat-expansion-panel>
                      </div>
                      <mat-divider [vertical]="true"></mat-divider>
                      <div class="col-sm-5">
                        <div style="float : right">
                          <button mat-icon-button color="primary" (click) = "onCreateCouleur(j)">
                            <mat-icon>add</mat-icon>
                          </button>
                        </div>
                        <mat-list>
                          <h3 mat-subheader>Couleurs</h3>
                          <mat-list-item *ngFor="let couleur of modele.couleurs, let i = index">
                            <mat-icon mat-list-icon [style.color]="couleur.value">invert_colors</mat-icon>
                            <h4 mat-line>{{couleur.name}}</h4>
                            <p mat-line> {{couleur.value}} </p>
                            <button mat-icon-button color="primary" (click) = "onUpdateCouleur(i,j)">
                              <mat-icon>create</mat-icon>
                            </button>
                            <button mat-icon-button color="warn" (click) = "onDeleteCouleur(i,j)">
                              <mat-icon>delete</mat-icon>
                            </button>
                          </mat-list-item>
                        </mat-list>
                      </div>
                    </div>
                  </mat-expansion-panel>
               </mat-accordion>
            </div>
        </div>
    </div>
</div>
